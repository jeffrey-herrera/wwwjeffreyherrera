---
interface Props {
  variant?: 'primary' | 'secondary' | 'tertiary';
  href?: string;
  external?: boolean;
  class?: string;
  imageUrl?: string;
  imageAlt?: string;
}

const { 
  variant = 'primary', 
  href, 
  external = false, 
  class: className = '',
  imageUrl,
  imageAlt = ''
} = Astro.props;

const linkProps = external 
  ? { target: '_blank', rel: 'noopener noreferrer' }
  : {};

const CardElement = href ? 'a' : 'div';
---

<CardElement
  href={href}
  class={`card card--${variant} ${className}`}
  {...(href ? linkProps : {})}
>
  {imageUrl && (
    <div class="card__image">
      <img src={imageUrl} alt={imageAlt} />
    </div>
  )}
  <div class="card__content">
    <slot />
  </div>
</CardElement>

<style>
  .card {
    border-radius: 8px;
    overflow: hidden;
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
    display: block;
    text-decoration: none;
    color: inherit;
    position: relative;
    transform: translateY(0);
  }

  .card__image {
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    position: relative;
  }

  .card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card__content {
    padding: 1rem 1rem 2rem 1rem;
    min-height: 100px;
  }

  /* Primary Card - Orange background with dramatic hover */
  .card--primary {
    background: #f97316; /* orange-500 */
    color: white;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  .card--primary:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(249, 115, 22, 0.25), 0 0 0 1px rgba(249, 115, 22, 0.1);
  }

  .card--primary:hover .card__image img {
    transform: scale(1.1);
  }

  /* Secondary Card - Stone 950 background with white text */
  .card--secondary {
    background: #0c0a09; /* stone-950 */
    color: white;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }

  .card--secondary:hover {
    transform: translateY(-6px) scale(1.015);
    box-shadow: 0 20px 25px -5px rgba(12, 10, 9, 0.25), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  .card--secondary:hover .card__image img {
    transform: scale(1.05);
  }

  /* Tertiary Card - Subtle gray with minimal hover */
  .card--tertiary {
    background: #f9fafb; /* gray-50 */
    color: #374151; /* gray-700 */
    border: 1px solid #e5e7eb; /* gray-200 */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  }

  .card--tertiary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  .card--tertiary:hover .card__image img {
    transform: scale(1.02);
  }

  /* Focus states for accessibility */
  .card:focus-visible {
    outline: 2px solid #f97316;
    outline-offset: 2px;
  }

  /* Ensure text content is properly spaced */
  .card__content > :first-child {
    margin-top: 0;
  }

  .card__content > :last-child {
    margin-bottom: 0;
  }
</style> 